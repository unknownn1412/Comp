<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<link rel="stylesheet" href="Calculator.css">
<title> Kumpulan Pembelajaran Youtube </title>
<style>
  :root{ --bg1: linear-gradient(135deg,#667eea,#764ba2); --glass: rgba(255,255,255,0.10); --accent1: #00c6ff; --accent2: #0072ff; --text: #f5f7fb; --muted: rgba(245,247,251,0.82); }
  [data-theme="dark"]{ --glass: rgba(0,0,0,0.35); --bg1: linear-gradient(135deg,#071027,#0b1220); --text:#e6eef8; --muted: rgba(230,238,248,0.85); }
  *{box-sizing:border-box;font-family:Inter,'Poppins',system-ui,-apple-system,sans-serif}
  html,body{height:100%;margin:0}
  body{min-height:100vh;display:flex;flex-direction:column;align-items:center;gap:18px;padding:22px;background:var(--bg1);color:var(--text);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

  .site-header{width:100%;max-width:1180px;display:flex;align-items:center;gap:12px;padding:12px 18px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 8px 24px rgba(2,6,23,0.18);border:1px solid rgba(255,255,255,0.03);backdrop-filter: blur(6px)}
  .brand .title{font-weight:800}
  .brand .sub{font-size:.78rem;color:var(--muted)}
  .header-actions{margin-left:auto;display:flex;align-items:center;gap:10px}

  .menu-btn{
    background:transparent;
    border:none;
    padding:8px;
    border-radius:10px;
    cursor:pointer;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    position:relative;
    z-index:1300;
  }
  .hamburger{ width:28px; height:20px; position:relative; display:inline-block; -webkit-tap-highlight-color: transparent; }
  .hamburger span{ position:absolute; left:0; right:0; height:2.5px; background:linear-gradient(90deg,var(--accent1),var(--accent2)); border-radius:3px; transition:transform .28s cubic-bezier(.2,.9,.3,1), opacity .18s, top .18s; will-change:transform, opacity, top; }
  .hamburger span:nth-child(1){ top:0; }
  .hamburger span:nth-child(2){ top:9px; }
  .hamburger span:nth-child(3){ top:18px; }
  .menu-btn.open .hamburger span:nth-child(1){ transform: translateY(9px) rotate(45deg); top:9px; }
  .menu-btn.open .hamburger span:nth-child(2){ opacity:0; transform: scaleX(0.2); top:9px; }
  .menu-btn.open .hamburger span:nth-child(3){ transform: translateY(-9px) rotate(-45deg); top:9px; }

  .side-menu{ position:fixed; top:0; left:0; height:100vh; width:360px; max-width:85vw; background:var(--glass); backdrop-filter:blur(12px); box-shadow:0 30px 60px rgba(2,6,23,0.45); transform:translateX(-110%); transition:transform .28s cubic-bezier(.2,.9,.3,1); z-index:1200; padding:22px; overflow:auto; -webkit-overflow-scrolling:touch; }
  .side-menu.open{ transform:translateX(0); }

  .menu-overlay{ position:fixed; inset:0; background: rgba(0,0,0,0.35); z-index:1100; opacity:0; pointer-events:none; transition:opacity .22s ease; }
  .menu-overlay.show{ opacity:1; pointer-events:auto; }

  .menu-list a, .collapsible { display:flex; align-items:center; gap:10px; padding:10px; border-radius:10px; text-decoration:none; color:var(--text); font-weight:700; transition:transform .12s ease, background .12s ease, box-shadow .12s ease; position:relative; overflow:visible; }
  .menu-list a:focus, .collapsible:focus { outline:2px solid rgba(0,198,255,0.14); outline-offset:3px; }
  .menu-list a::after, .collapsible::after{ content:''; position:absolute; left:10px; right:10px; height:4px; border-radius:6px; background:linear-gradient(90deg,var(--accent1),var(--accent2)); transform:scaleX(0); transform-origin:left; transition:transform .28s cubic-bezier(.2,.9,.3,1),opacity .18s; opacity:0 }
  .menu-list a:hover, .collapsible:hover{ transform:translateX(6px); box-shadow:0 8px 20px rgba(0,0,0,0.10) }
  .menu-list a:hover::after, .collapsible:hover::after{ transform:scaleX(1); opacity:1 }
  .close-menu { color:var(--text); background:transparent; border:none; font-size:26px; cursor:pointer; }
  @media (max-width:420px){ .side-menu{ width:85vw; } .hamburger{ width:24px; height:18px; } }

  
  .card{width:100%;max-width:1180px;border-radius:18px;padding:18px;background:var(--glass);backdrop-filter: blur(10px);box-shadow:0 18px 40px rgba(2,6,23,0.35);display:grid;grid-template-columns:1fr;grid-auto-rows:auto;gap:18px;position:relative;overflow:visible}
  .card::before{ content:'';position:absolute;left:-40px;top:-40px;width:200px;height:200px;border-radius:50%;background:radial-gradient(circle at 20% 20%, rgba(0,198,255,0.12), transparent 30%);pointer-events:none;mix-blend-mode:screen;filter:blur(18px);opacity:.9}
  @media (max-width:980px){ .card{padding:14px} }

  .videos-section { padding:8px 6px; }
  .videos-header { display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap }
  .videos-header h1, .videos-header h2 { margin:0; font-size:1.02rem }
  .videos-grid {
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:12px;
    margin-top:12px;
  }
  @media (max-width:680px){ .videos-grid { grid-template-columns:1fr } }

  .video-card {
    position:relative;
    border-radius:12px;
    overflow:hidden;
    background:linear-gradient(180deg, rgba(0,0,0,0.06), rgba(0,0,0,0.03));
    box-shadow:0 10px 28px rgba(2,6,23,0.2);
    cursor:pointer;
    transition:transform .18s ease, box-shadow .18s ease;
    min-height:140px;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .video-card:hover { transform:translateY(-6px); box-shadow:0 20px 40px rgba(2,6,23,0.28) }
  .video-thumb { width:100%; height:100%; display:block; object-fit:cover; aspect-ratio:16/9; background:linear-gradient(135deg,#0b1220,#0a1b2f); }
  .video-overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; }
  .play-circle { width:76px; height:76px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:linear-gradient(90deg,var(--accent1),var(--accent2)); box-shadow:0 10px 30px rgba(0,198,255,0.12); }
  .play-circle svg { width:34px; height:34px; fill:#fff }
  .video-placeholder { display:flex;align-items:center;justify-content:center;height:100%; color:var(--muted); font-weight:700; padding:16px; text-align:center }

  .video-modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:2000; background:linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.85)); }
  .video-modal.show { display:flex }
  .video-modal .inner { width:min(980px,96%); aspect-ratio:16/9; background:#000; border-radius:10px; overflow:hidden; box-shadow:0 30px 80px rgba(2,6,23,0.6); position:relative }
  .video-modal .close { position:absolute; right:8px; top:8px; z-index:10; background:transparent; border:none; color:#fff; font-size:22px; padding:8px; cursor:pointer }
  .video-modal .iframe { width:100%; height:100%; border:0; display:block }

  .videos-note { margin-top:8px; font-size:.92rem; color:var(--muted) }

  .muted{color:var(--muted);font-size:.86rem}
</style>
</head>
<body data-theme="light">

<header class="site-header" role="banner" aria-label="Compounding Calc header">
  <button id="menuBtn" class="menu-btn" aria-label="Buka menu" aria-controls="sideMenu" aria-expanded="false">
    <span class="hamburger" aria-hidden="true"><span></span><span></span><span></span></span>
  </button>
  <div class="brand" style="margin-left:6px">
    <div class="title" style="font-size:1.05rem">Link Youtube</div>
    <div class="sub"></div>
  </div>
  <div class="header-actions" role="toolbar" aria-label="Aksi header">
    <label for="themeToggle" style="font-size:.78rem;color:var(--muted)">Mode</label>
    <select id="themeToggle" class="input-read" aria-label="Toggle tema" style="width:120px">
      <option value="light">Ringan</option><option value="dark">Gelap</option>
    </select>
  </div>
</header>

<nav id="sideMenu" class="side-menu" aria-hidden="true">
  <button id="closeMenu" class="close-menu" aria-label="Tutup menu" style="position:absolute;right:12px;top:8px;background:transparent;border:none;font-size:26px;color:var(--text)">×</button>
  <ul class="menu-list" role="menu" aria-label="Menu">
    <li role="none"><a href="Calculator.html" id="navCalculator" data-nav="calculator" role="menuitem" tabindex="0">Calculator</a></li>
    <li role="none">
      <button class="collapsible" aria-expanded="false" style="background:transparent;border:none;padding:0">Pembelajaran</button>
      <ul class="sublist" aria-label="Kumpulan video YouTube" role="menu">
        <li><a href="Bunga2.html" class="video-link muted" role="menuitem" tabindex="-1"> Materi compounding</a></li>
        <li><a href="video.html" class="video-link muted" role="menuitem" tabindex="-1">Pembelajaran Youtube</a>
      </ul>
    </li>
    <li role="none"><a href="About.html" id="navAbout">Tentang & Bantuan</a></li>
  </ul>
</nav>
<div id="menuOverlay" class="menu-overlay" hidden></div>

<main class="card" role="main" aria-label="Kumpulan Video YouTube">

  <section class="videos-section" aria-label="Kumpulan Video YouTube">
    <div class="videos-header">
      <h1>Kumpulan video pembelajaran</h1>
    </div>

    <div class="videos-grid" id="videosGrid" role="list">
      <div class="video-card" role="listitem" tabindex="0" data-video="https://youtu.be/5vkGXY1hlpY?si=mr9zmV3CIEn2P8dN" data-title="Video 1">
        <div class="video-overlay" aria-hidden="true">
          <div class="play-circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7z"/></svg>
          </div>
        </div>
      </div>

      <div class="video-card" role="listitem" tabindex="0" data-video="https://youtu.be/oU40sOr3alg?si=uMPJtoDkJJ82dQjG" data-title="Video 2">
        <div class="video-overlay" aria-hidden="true">
          <div class="play-circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7z"/></svg>
          </div>
        </div>
      </div>

      <div class="video-card" role="listitem" tabindex="0" data-video="https://youtu.be/r_YPjXZcQQY?si=brsHrrH0mxlCkp8M" data-title="Video 3">
        <div class="video-overlay" aria-hidden="true">
          <div class="play-circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7z"/></svg>
          </div>
        </div>
      </div>

      <div class="video-card" role="listitem" tabindex="0" data-video="https://youtu.be/tZJojCQVX48?si=zntB7m966Zo6EyUy" data-title="Video 4">
        <div class="video-overlay" aria-hidden="true">
          <div class="play-circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7z"/></svg>
          </div>
        </div>
      </div>

      <div class="video-card" role="listitem" tabindex="0" data-video="https://youtu.be/r4djKLNSbBk?si=uQ9zuDsLugJan_la" data-title="Video 5">
        <div class="video-overlay" aria-hidden="true">
          <div class="play-circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7z"/></svg>
          </div>
        </div>
      </div>

      <div class="video-card" role="listitem" tabindex="0" data-video="https://youtu.be/kz6jt0Douv0?si=Znt-OdmIyjrLr3G0" data-title="Video 6">
        <div class="video-overlay" aria-hidden="true">
          <div class="play-circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7z"/></svg>
          </div>
        </div>
      </div>

      
      
    </div>

  </section>

</main>

<!-- VIDEO MODAL -->
<div id="videoModal" class="video-modal" aria-hidden="true" role="dialog" aria-label="Video player">
  <div class="inner" role="document">
    <button class="close" aria-label="Tutup pemutar">✕</button>
    <iframe id="videoIframe" src="" allow="autoplay; fullscreen" allowfullscreen></iframe>
  </div>
</div>

<!-- Minimal JS: hanya menu (seperti semula) + video handlers -->
<script>
(function(){
  // Header/menu behaviour (restored original logic)
  const menuBtn = document.getElementById('menuBtn');
  const sideMenu = document.getElementById('sideMenu');
  const menuOverlay = document.getElementById('menuOverlay');
  const closeMenu = document.getElementById('closeMenu');
  const collapsibles = Array.from(document.querySelectorAll('.collapsible'));
  const menuLinks = Array.from(document.querySelectorAll('.menu-list a'));

  function setBodyScroll(disable){ try{ if(disable) document.documentElement.style.overflow = 'hidden'; else document.documentElement.style.overflow = ''; }catch(e){} }

  let focusTrapHandler = null;
  function trapFocus(container){
    const focusable = Array.from(container.querySelectorAll('a,button,input,select,textarea,[tabindex]:not([tabindex="-1"])'))
      .filter(n => !n.hasAttribute('disabled') && n.offsetParent !== null);
    if(!focusable.length) return;
    const first = focusable[0], last = focusable[focusable.length-1];
    focusTrapHandler = function(e){
      if(e.key !== 'Tab') return;
      if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
    };
    container.addEventListener('keydown', focusTrapHandler);
  }
  function releaseTrap(container){ if(focusTrapHandler) container.removeEventListener('keydown', focusTrapHandler); focusTrapHandler = null; }

  function openMenu(){
    sideMenu.classList.add('open');
    sideMenu.setAttribute('aria-hidden','false');
    menuBtn.classList.add('open');
    menuBtn.setAttribute('aria-expanded','true');
    if(menuOverlay){ menuOverlay.hidden = false; menuOverlay.classList.add('show'); }
    setBodyScroll(true);
    const first = sideMenu.querySelector('a,button'); if(first) first.focus(); trapFocus(sideMenu);
  }

  function closeMenuFn(){
    sideMenu.classList.remove('open');
    sideMenu.setAttribute('aria-hidden','true');
    menuBtn.classList.remove('open');
    menuBtn.setAttribute('aria-expanded','false');
    if(menuOverlay){ menuOverlay.classList.remove('show'); setTimeout(()=>{ if(!menuOverlay.classList.contains('show')) menuOverlay.hidden = true; }, 260); }
    setBodyScroll(false);
    releaseTrap(sideMenu);
    menuBtn.focus();
  }

  if(menuBtn && sideMenu){
    menuBtn.addEventListener('click', (e)=>{ e.preventDefault(); if(sideMenu.classList.contains('open')) closeMenuFn(); else openMenu(); });
  }

  closeMenu && closeMenu.addEventListener('click', (e)=>{ e.preventDefault(); closeMenuFn(); });
  menuOverlay && menuOverlay.addEventListener('click', (e)=>{ e.preventDefault(); closeMenuFn(); });
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && sideMenu.classList.contains('open')) closeMenuFn(); });

  collapsibles.forEach(btn => {
    const next = btn.nextElementSibling;
    if(next) next.style.display = 'none';
    btn.setAttribute('role','button');
    btn.addEventListener('click', ()=> {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      if(next){ if(expanded){ next.classList.remove('expanded'); setTimeout(()=> next.style.display = 'none', 320); } else { next.style.display = 'block'; requestAnimationFrame(()=> next.classList.add('expanded')); } }
    });
  });

  menuLinks.forEach(a=>{
    a.addEventListener('click', (ev)=>{
      menuLinks.forEach(x => x.classList.remove('active'));
      a.classList.add('active');
      a.classList.add('press');
      setTimeout(()=> a.classList.remove('press'), 260);
      if(window.innerWidth < 900) closeMenuFn();
    });
    a.addEventListener('touchstart', ()=> a.classList.add('press'), {passive:true});
    a.addEventListener('touchend', ()=> a.classList.remove('press'));
    a.addEventListener('mousedown', ()=> a.classList.add('press'));
    a.addEventListener('mouseup', ()=> a.classList.remove('press'));
    a.addEventListener('mouseleave', ()=> a.classList.remove('press'));
  });

  // theme toggle persistence (kept)
  const themeToggle = document.getElementById('themeToggle');
  if(themeToggle){
    themeToggle.addEventListener('change', ()=>{ document.body.setAttribute('data-theme', themeToggle.value === 'dark' ? 'dark' : 'light'); localStorage.setItem('compcalc_theme', themeToggle.value); });
    const savedTheme = localStorage.getItem('compcalc_theme'); if(savedTheme) themeToggle.value = savedTheme;
    document.body.setAttribute('data-theme', themeToggle && themeToggle.value === 'dark' ? 'dark' : 'light');
  }

  // ========= Video section logic (no edit feature) =========
  const grid = document.getElementById('videosGrid');
  const modal = document.getElementById('videoModal');
  const iframe = document.getElementById('videoIframe');
  const closeBtn = modal.querySelector('.close');

  // helper: get thumbnail url from id
 // ---------------- robust thumbnail + video init ----------------
/* helper: extract YouTube ID from many URL forms or accept raw ID */
function extractYouTubeID(input){
  if(!input) return null;
  const s = String(input).trim();
  if(/^[A-Za-z0-9_-]{11}$/.test(s)) return s; // already an ID
  let m = s.match(/[?&]v=([A-Za-z0-9_-]{11})/); if(m) return m[1];
  m = s.match(/youtu\.be\/([A-Za-z0-9_-]{11})/); if(m) return m[1];
  m = s.match(/\/embed\/([A-Za-z0-9_-]{11})/); if(m) return m[1];
  m = s.match(/\/shorts\/([A-Za-z0-9_-]{11})/); if(m) return m[1];
  // fallback: any 11-char token
  m = s.match(/([A-Za-z0-9_-]{11})/); return m ? m[1] : null;
}

/* thumbnail fallback urls (tries highest-res first) */
function thumbUrls(id){
  return [
    'https://img.youtube.com/vi/' + id + '/maxresdefault.jpg',
    'https://img.youtube.com/vi/' + id + '/hqdefault.jpg',
    'https://img.youtube.com/vi/' + id + '/mqdefault.jpg'
  ];
}

/* set image src with fallbacks */
function setImgWithFallback(img, urls, idx=0){
  if(idx >= urls.length){ img.style.display = 'none'; return; }
  img.src = urls[idx];
  img.onerror = function(){
    // try next url
    setImgWithFallback(img, urls, idx+1);
  };
}

/* open / close modal (uses normalized id) */
function openVideo(id){
  if(!id) return;
  iframe.src = 'https://www.youtube.com/embed/' + id + '?autoplay=1&rel=0';
  modal.classList.add('show');
  modal.setAttribute('aria-hidden','false');
  setBodyScroll(true);
}
function closeVideo(){
  iframe.src = '';
  modal.classList.remove('show');
  modal.setAttribute('aria-hidden','true');
  setBodyScroll(false);
}

/* initialize each card: extract id, insert thumbnail if id ok, attach handlers */
Array.from(grid.querySelectorAll('.video-card')).forEach((card, idx) => {
  const raw = (card.dataset.video || '').trim();
  const id = extractYouTubeID(raw);
  const title = card.dataset.title || ('Video ' + (idx+1));
  const ph = card.querySelector('.video-placeholder');

  if(id){
    // normalize dataset to store only ID (helpful for later)
    card.dataset.video = id;

    const img = document.createElement('img');
    img.className = 'video-thumb';
    img.alt = title;
    img.loading = 'lazy';
    img.style.display = 'block';
    setImgWithFallback(img, thumbUrls(id));
    if(ph) ph.style.display = 'none';
    card.insertBefore(img, card.firstChild);
  } else {
    if(ph) ph.style.display = 'flex';
  }

  // click: open modal only if id present (dataset was normalized)
  card.addEventListener('click', (ev) => {
    const vid = (card.dataset.video || '').trim();
    if(vid) openVideo(vid);
  });

  // keyboard: Enter / Space
  card.addEventListener('keydown', (e) => {
    if((e.key === 'Enter' || e.key === ' ') ){
      e.preventDefault();
      const vid = (card.dataset.video || '').trim();
      if(vid) openVideo(vid);
    }
  });
});

/* modal close handlers (already exist in your code but safe to ensure) */
if(closeBtn) closeBtn.addEventListener('click', closeVideo);
if(modal){
  modal.addEventListener('click', function(e){
    if(e.target === modal) closeVideo();
  });
}
document.addEventListener('keydown', (e) => { if(e.key === 'Escape' && modal && modal.classList.contains('show')) closeVideo(); });


  // open modal and play
  function openVideo(id){
    if(!id) return;
    iframe.src = 'https://www.youtube.com/embed/' + id + '?autoplay=1&rel=0';
    modal.classList.add('show');
    modal.setAttribute('aria-hidden','false');
    setBodyScroll(true);
  }
  function closeVideo(){
    iframe.src = '';
    modal.classList.remove('show');
    modal.setAttribute('aria-hidden','true');
    setBodyScroll(false);
  }

  // initialize cards: if data-video present, show thumbnail; otherwise keep placeholder
  Array.from(grid.querySelectorAll('.video-card')).forEach((card, idx) => {
    const id = (card.dataset.video || '').trim();
    if(id){
      // create thumbnail image
      const img = document.createElement('img');
      img.className = 'video-thumb';
      img.src = thumbFor(id);
      img.alt = card.dataset.title || ('Video ' + (idx+1));
      img.onerror = function(){ this.style.display='none'; };
      // hide placeholder text if present
      const ph = card.querySelector('.video-placeholder');
      if(ph) ph.style.display = 'none';
      card.insertBefore(img, card.firstChild);
    }

    // clicking card: only open if data-video is set
    card.addEventListener('click', (ev) => {
      const vid = (card.dataset.video || '').trim();
      if(vid){
        openVideo(vid);
      }
      // else do nothing
    });

    // keyboard accessibility (Enter to open)
    card.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); card.click(); }
    });
  });

  // modal close
  closeBtn.addEventListener('click', closeVideo);
  modal.addEventListener('click', (e) => {
    if(e.target === modal) closeVideo();
  });
  document.addEventListener('keydown', (e) => { if(e.key === 'Escape' && modal.classList.contains('show')) closeVideo(); });

})();
</script>
</body>
</html>
